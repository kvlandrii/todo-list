{"version":3,"file":"static/js/398.8e113751.chunk.js","mappings":"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","sources":["Todo.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport \"./Todo.scss\";\r\nimport { LoginContext } from \"./LoginContext.js\";\r\n\r\nconst Todos = () => {\r\n  const [todos, setTodos] = useState([]);\r\n  const [isShowInputs, setIsShowInputs] = useState(false);\r\n  const [nameInput, setNameInput] = useState(\"\");\r\n  const [descInput, setDescInput] = useState(\"\");\r\n  const [isCheckInput, setIsCheckInput] = useState(false);\r\n  const [addedTodos, setAddedTodos] = useState(0);\r\n  const [isWrongLength, setIsWrongLength] = useState(false);\r\n  const url = `https://kvlandriitodos.onrender.com/users`;\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const { id } = useContext(LoginContext);\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get(url + `/${id}`)\r\n      .then((response) => {\r\n        setTodos(response.data.todos);\r\n      })\r\n      .catch((error) => {\r\n        console.error(error);\r\n      });\r\n  }, [addedTodos, id, url]);\r\n\r\n  const addTodoHandler = () => {\r\n    setIsWrongLength(false);\r\n    if (isShowInputs) {\r\n      if (\r\n        nameInput.length > 2 &&\r\n        nameInput.length < 20 &&\r\n        descInput.length < 50\r\n      ) {\r\n        axios\r\n          .patch(url + `/${id}`, {\r\n            todos: [\r\n              ...todos,\r\n              {\r\n                id: Math.random().toString(36).substr(2, 9),\r\n                title: nameInput,\r\n                description: descInput,\r\n                checked: isCheckInput,\r\n                creationDate: new Date().toUTCString(),\r\n              },\r\n            ],\r\n          })\r\n          .then(() => {\r\n            setAddedTodos((prev) => {\r\n              return prev + 1;\r\n            });\r\n          })\r\n          .catch((error) => {\r\n            console.log(error);\r\n          });\r\n        setNameInput(\"\");\r\n        setDescInput(\"\");\r\n        setIsCheckInput(false);\r\n\r\n        return;\r\n      } else {\r\n        setIsWrongLength(true);\r\n      }\r\n    }\r\n    setIsShowInputs(true);\r\n  };\r\n\r\n  const handleDelete = (_, index) => {\r\n    const newTodos = todos.filter((_, i) => {\r\n      return i !== index;\r\n    });\r\n    axios\r\n      .patch(url + `/${id}`, {\r\n        todos: newTodos,\r\n      })\r\n      .then(() => {\r\n        setTodos(newTodos);\r\n      })\r\n      .catch((error) => {\r\n        console.error(error);\r\n      });\r\n  };\r\n\r\n  const nameInputChange = (e) => {\r\n    setNameInput(e.target.value);\r\n  };\r\n\r\n  const descInputChange = (e) => {\r\n    setDescInput(e.target.value);\r\n  };\r\n\r\n  const checkInputHandler = () => {\r\n    setIsCheckInput(!isCheckInput);\r\n  };\r\n\r\n  const cancelHandler = () => {\r\n    setIsShowInputs(!isShowInputs);\r\n  };\r\n\r\n  const handleEdit = (item) => {\r\n    navigate(`/edit`, { state: { todos, item } });\r\n  };\r\n\r\n  const toggleComplete = (itemId) => {\r\n    const updatedTodos = todos.map((todo) => {\r\n      if (todo.id === itemId) {\r\n        return {\r\n          ...todo,\r\n          checked: !todo.checked,\r\n        };\r\n      }\r\n      return todo;\r\n    });\r\n\r\n    axios\r\n      .patch(url + `/${id}`, {\r\n        todos: updatedTodos,\r\n      })\r\n      .then(() => {\r\n        setTodos(updatedTodos);\r\n      })\r\n      .catch((error) => {\r\n        console.error(error);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"add-todo-container\">\r\n        {isShowInputs && (\r\n          <div className=\"form\">\r\n            {isWrongLength && <p>Wrong length of name or description</p>}\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Name\"\r\n              onChange={nameInputChange}\r\n              value={nameInput}\r\n              className=\"form__input\"\r\n            />\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Description\"\r\n              onChange={descInputChange}\r\n              value={descInput}\r\n              className=\"form__input\"\r\n            />\r\n            <div>\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={isCheckInput}\r\n                onChange={checkInputHandler}\r\n                className=\"form__input\"\r\n              />\r\n              <span>Completed</span>\r\n            </div>\r\n          </div>\r\n        )}\r\n        <div className=\"buttons-container\">\r\n          <button\r\n            className=\"buttons-container__button\"\r\n            onClick={addTodoHandler}\r\n          >\r\n            Add ToDo\r\n          </button>\r\n          {isShowInputs && (\r\n            <button\r\n              onClick={cancelHandler}\r\n              className=\"buttons-container__button buttons-container__button_close\"\r\n            >\r\n              Close\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n      <div className=\"todos\">\r\n        {todos.map((item, index) => (\r\n          <div className=\"todo\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={item.checked}\r\n              onChange={() => toggleComplete(item.id)}\r\n            />\r\n            <p>{index + 1}</p>\r\n            <div key={item.id} className=\"todo-container\">\r\n              <div className=\"todo-info\">\r\n                <div className=\"todo-info__text\">\r\n                  <p>{item.title}</p>\r\n                  <p>{item.description}</p>\r\n                </div>\r\n                <div className=\"todo-buttons\">\r\n                  <button onClick={() => handleEdit(item)}>Edit</button>\r\n                  <button onClick={() => handleDelete(item, index)}>\r\n                    Delete\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n      {!todos.length && <p>There are no todos yet</p>}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Todos;\r\n"],"names":["Todos","todos","setTodos","useState","isShowInputs","setIsShowInputs","nameInput","setNameInput","descInput","setDescInput","isCheckInput","setIsCheckInput","addedTodos","setAddedTodos","isWrongLength","setIsWrongLength","url","navigate","useNavigate","id","useContext","LoginContext","useEffect","axios","get","concat","then","response","data","catch","error","console","_jsxs","_Fragment","children","className","_jsx","type","placeholder","onChange","e","target","value","checked","checkInputHandler","onClick","addTodoHandler","length","patch","Math","random","toString","substr","title","description","creationDate","Date","toUTCString","prev","log","cancelHandler","map","item","index","itemId","updatedTodos","todo","toggleComplete","state","handleEdit","handleDelete","_","newTodos","filter","i"],"sourceRoot":""}