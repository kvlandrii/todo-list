"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[398],{398:(e,t,s)=>{s.r(t),s.d(t,{default:()=>d});var n=s(791),o=s(689),c=s(294),a=s(894),i=s(184);const d=()=>{const[e,t]=(0,n.useState)([]),[s,d]=(0,n.useState)(!1),[r,l]=(0,n.useState)(""),[h,u]=(0,n.useState)(""),[p,x]=(0,n.useState)(!1),[m,j]=(0,n.useState)(0),[b,g]=(0,n.useState)(!1),k="https://kvlandriitodos.onrender.com/users",v=(0,o.s0)(),{id:_}=(0,n.useContext)(a.O);(0,n.useEffect)((()=>{c.Z.get(k+"/".concat(_)).then((e=>{t(e.data.todos)})).catch((e=>{console.error(e)}))}),[m,_,k]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"add-todo-container",children:[s&&(0,i.jsxs)("div",{className:"form",children:[b&&(0,i.jsx)("p",{children:"Wrong length of name or description"}),(0,i.jsx)("input",{type:"text",placeholder:"Name",onChange:e=>{l(e.target.value)},value:r,className:"form__input"}),(0,i.jsx)("input",{type:"text",placeholder:"Description",onChange:e=>{u(e.target.value)},value:h,className:"form__input"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("input",{type:"checkbox",checked:p,onChange:()=>{x(!p)},className:"form__input"}),(0,i.jsx)("span",{children:"Completed"})]})]}),(0,i.jsxs)("div",{className:"buttons-container",children:[(0,i.jsx)("button",{className:"buttons-container__button",onClick:()=>{if(g(!1),s){if(r.length>2&&r.length<20&&h.length<50)return c.Z.patch(k+"/".concat(_),{todos:[...e,{id:Math.random().toString(36).substr(2,9),title:r,description:h,checked:p,creationDate:(new Date).toUTCString()}]}).then((()=>{j((e=>e+1))})).catch((e=>{console.log(e)})),l(""),u(""),void x(!1);g(!0)}d(!0)},children:"Add ToDo"}),s&&(0,i.jsx)("button",{onClick:()=>{d(!s)},className:"buttons-container__button buttons-container__button_close",children:"Close"})]})]}),(0,i.jsx)("div",{className:"todos",children:e.map(((s,n)=>(0,i.jsxs)("div",{className:"todo",children:[(0,i.jsx)("input",{type:"checkbox",checked:s.checked,onChange:()=>(s=>{const n=e.map((e=>e.id===s?{...e,checked:!e.checked}:e));c.Z.patch(k+"/".concat(_),{todos:n}).then((()=>{t(n)})).catch((e=>{console.error(e)}))})(s.id)}),(0,i.jsx)("p",{children:n+1}),(0,i.jsx)("div",{className:"todo-container",children:(0,i.jsxs)("div",{className:"todo-info",children:[(0,i.jsxs)("div",{className:"todo-info__text",children:[(0,i.jsx)("p",{children:s.title}),(0,i.jsx)("p",{children:s.description})]}),(0,i.jsxs)("div",{className:"todo-buttons",children:[(0,i.jsx)("button",{onClick:()=>(t=>{v("/edit",{state:{todos:e,item:t}})})(s),children:"Edit"}),(0,i.jsx)("button",{onClick:()=>((s,n)=>{const o=e.filter(((e,t)=>t!==n));c.Z.patch(k+"/".concat(_),{todos:o}).then((()=>{t(o)})).catch((e=>{console.error(e)}))})(0,n),children:"Delete"})]})]})},s.id)]})))}),!e.length&&(0,i.jsx)("p",{children:"There are no todos yet"})]})}}}]);
//# sourceMappingURL=398.8e113751.chunk.js.map